{% extends "base.html" %}
{% from "_pagination.html" import pager %}
{% block title %}Список сделок{% endblock %}
{% block content %}
<div class="deals-list">
    <h2>Список сделок</h2>

    <table class="data-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Символ</th>
            <th>Сторона</th>
            <th>Вход</th>
            <th>Размер</th>
            <th>Статус</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for deal in items %}
        <tr>
            <td>{{ deal.id }}</td>
            <td>{{ deal.symbol }}</td>
            <td>{{ deal.side }}</td>
            <td>{{ deal.entry_price }}</td>
            <td>{{ deal.size }}</td>
            <td>{{ deal.status }}</td>
            <td>
                <a href="/deals/ui/{{ deal.id }}" class="button-small">Подробнее</a>
                <form method="post" action="/deals/ui/delete/{{ deal.id }}" style="display:inline;">
                    <button type="submit" class="button-small" onclick="return confirm('Удалить сделку?');">Удалить</button>
                </form>
                <form method="post" action="/deals/{{ deal.id }}/close" style="display:inline;">
                    <button type="submit" class="button-small">Закрыть</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    {{ pager(page, pages, per_page) }}

    <div style="margin-top:10px;">
        На странице:
        {% for n in [10,20,50,100] %}
          {% if per_page == n %}
            <strong>{{ n }}</strong>
          {% else %}
            <a href="?page=1&per_page={{ n }}">{{ n }}</a>
          {% endif %}
          {% if not loop.last %} | {% endif %}
        {% endfor %}
    </div>

    <a href="/deals/ui/create/" class="button" style="margin-top:16px; display:inline-block;">Открыть новую сделку</a>
</div>
{% endblock %}
