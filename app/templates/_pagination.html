{% macro pager(page=1, pages=1, per_page=20) %}
{% set p   = (page    | default(1, true)  | int) %}
{% set pg  = (pages   | default(1, true)  | int) %}
{% set per = (per_page| default(20, true) | int) %}

<nav class="pagination" style="margin-top:12px;">
  <ul style="display:flex; gap:8px; list-style:none; padding:0; align-items:center;">
    {% if p > 1 %}
      <li><a href="?page=1&per_page={{ per }}">« Первая</a></li>
      <li><a href="?page={{ p - 1 }}&per_page={{ per }}">‹ Назад</a></li>
    {% else %}
      <li style="opacity:.5">« Первая</li>
      <li style="opacity:.5">‹ Назад</li>
    {% endif %}

    <li>Стр. {{ p }} из {{ pg }}</li>

    {% if p < pg %}
      <li><a href="?page={{ p + 1 }}&per_page={{ per }}">Вперёд ›</a></li>
      <li><a href="?page={{ pg }}&per_page={{ per }}">Последняя »</a></li>
    {% else %}
      <li style="opacity:.5">Вперёд ›</li>
      <li style="opacity:.5">Последняя »</li>
    {% endif %}
  </ul>
</nav>
{% endmacro %}
